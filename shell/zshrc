# Exports
export ZSH=$HOME/.oh-my-zsh
export WORKON_HOME=~/.venvs
export PYTHONDONTWRITEBYTECODE=1

# Load nvm if present
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"

ZSH_THEME="thrawny"

plugins=(git history history-substring-search docker pip python)

[[ ":$PATH:" != *":$HOME/.local/bin:"* ]] && PATH="$HOME/.local/bin:${PATH}"

# OSX specific stuff
if [[ "$(uname)" == "Darwin" ]]; then
  # export PATH=$HOME/bin:/usr/local/bin:$PATH
  plugins+=(osx)
else
  alias pbcopy='xclip -selection clipboard'
  alias pbpaste='xclip -selection clipboard -o'
fi;

source $ZSH/oh-my-zsh.sh

unalias -m "gpo"

# Aliases
alias pi="pip install -r requirements.txt"
alias pc="pip-compile"
alias fig="docker-compose"
alias svh="sudo vim /etc/hosts"
alias vbm="VBoxManage"
alias pycheck='isort && flake8 && pytest'
alias pyupdatecheck='pip-compile --upgrade --dry-run | diff -i requirements.txt -'
alias vpn='sudo openvpn'
alias kc='kubectl'
alias kt='kubetail'
alias kca='kubectl apply -f'
alias kcn='kubectl -n kube-system'
alias kcp='kubectl get pods'
alias gsha='git rev-parse HEAD | cut -c1-9'
alias kcl='kubectl logs -f'
alias kcu='kubectl config use-context'

# Functions
function gpo() {
  git push -u origin $(git_current_branch)
}

function kcaev() {
  envsubst < $1 | kubectl apply -f -
}

# Autocomplete
# source <(kubectl completion zsh)
source <(helm completion zsh)
source <(kops completion zsh)


[ -f ~/.zsh.local ] && source ~/.zsh.local
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion
