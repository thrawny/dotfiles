#!/usr/bin/env bash
# Wake monitors that have trouble waking from sleep (especially LG monitors with NVIDIA)

LOG_FILE="${XDG_STATE_HOME:-$HOME/.local/state}/wake-monitors.log"

log() {
    local msg="[$(date '+%Y-%m-%d %H:%M:%S')] [wake-monitors] $*"
    echo "$msg"
    echo "$msg" >> "$LOG_FILE"
}

log "=== wake-monitors started (on-resume) ==="

# Cycle DPMS off and on to force monitors to wake
log "Toggling DPMS off..."
hyprctl dispatch dpms off
sleep 1
log "Toggling DPMS on..."
hyprctl dispatch dpms on

log "=== wake-monitors finished ==="
