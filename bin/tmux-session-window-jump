#!/bin/bash
# Jump to named session and specific window
# Usage: tmux-session-window-jump <key> <window_index>
# Example: tmux-session-window-jump q 3  -> session mapped to 'q', window 3
#
# Reads session mappings from ~/dotfiles/config/tmux/session-mappings.conf
# Format: key=session_name (e.g., q=dotfiles)

key=$1
window_index=$2
config_file="$HOME/dotfiles/config/tmux/session-mappings.conf"

# Check if config file exists
if [ ! -f "$config_file" ]; then
  tmux display-message "Session mappings not configured. Copy session-mappings.conf.example to ~/dotfiles/config/tmux/session-mappings.conf"
  exit 1
fi

# Read session name from config file
session_name=$(grep "^${key}=" "$config_file" | cut -d= -f2)

# Check if key is mapped
if [ -z "$session_name" ]; then
  tmux display-message "No session mapped to key '$key'"
  exit 1
fi

# Check if session exists
if ! tmux has-session -t "$session_name" 2>/dev/null; then
  tmux display-message "Session '$session_name' not found"
  exit 1
fi

# Switch to the session:window
tmux switch-client -t "$session_name:$window_index"
