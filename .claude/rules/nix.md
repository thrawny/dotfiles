---
paths: {nix,config}/**
---

# Nix Configuration Rules

**Nix Home Manager is the sole configuration system.**

When making changes to shell, editor, or tool configuration:

| Config Type                       | Edit Here                                          |
| --------------------------------- | -------------------------------------------------- |
| Zsh (aliases, functions, exports) | `nix/home/shared/zsh.nix`                          |
| Git config                        | `config/git/gitconfig` (symlinked by Nix)          |
| Tmux                              | `nix/home/shared/tmux.nix`                         |
| Starship                          | `nix/home/shared/starship.nix`                     |
| Neovim                            | `config/nvim/` (symlinked by Nix)                  |
| Ghostty                           | `nix/home/shared/ghostty.nix`                      |
| Direnv                            | `nix/home/shared/direnv.nix`                       |
| Window managers (Niri, Hyprland)  | `nix/home/linux/niri/`, `nix/home/nixos/hyprland/` |
| PATH entries                      | `nix/home/shared/home-base.nix` (`sessionPath`)   |
| Packages                          | `nix/home/shared/packages.nix`                     |

**Key principle:** If a config is generated by Nix (like zsh, ghostty, tmux), edit the `.nix` file. If it's symlinked via `mkOutOfStoreSymlink`, edit the file in `config/`.

## After changes

- **Trivial changes** (adding a package to a list, renaming a string): skip validation.
- **Non-trivial changes** (new modules, option wiring, expressions): run `just check` to format, lint, and evaluate.

## Only when requested

- `just dry` - full build test (NixOS only)
- `just switch` - apply changes
