- name: symlinks for all are present
  file:
    state: link
    dest: "{{ home_dir }}/.{{ item.name }}"
    src: "{{ dotfiles_dir }}/{{ item.dir|default('') }}{{ item.name }}"
  with_items:
  - { "name": "vim", "dir": "config/" }
  - { "name": "zshrc", "dir": "shell/" }
  - { "name": "ideavimrc", "dir": "config/jetbrains/" }
  - { "name": "gitconfig", "dir": "git/" }
  - { "name": "gitignoreglobal", "dir": "git/" }
  - { "name": "tmux.conf", "dir": "shell/" }

# - name: "custom zsh theme is symlinked to .oh-my-zsh/custom"
#   file:
#     state: link
#     dest: "{{ home_dir }}/.oh-my-zsh/custom/{{ item }}"
#     src: "{{ dotfiles_dir }}/config/themes/{{ item }}"
#   with_items:
#   - thrawny.zsh-theme

- name: ~/.local/bin directory is present
  file:
    path: "{{ home_dir }}/.local/bin"
    state: directory
    recurse: yes

- name: direnv config folder is symlinked
  file:
    state: link
    dest: "{{ home_dir }}/.config/direnv"
    src: "{{ dotfiles_dir }}/config/direnv"

- name: ghostty config folder is symlinked
  file:
    state: link
    dest: "{{ home_dir }}/.config/ghostty"
    src: "{{ dotfiles_dir }}/config/ghostty"

- name: codex config symlinked
  file:
    state: link
    dest: "{{ home_dir }}/.codex/config.toml"
    src: "{{ dotfiles_dir }}/config/codex/config.toml"

# hack - claude commands symlinked to codex prompts - will see if this works well
- name: claude commands symlinked to codex prompts
  file:
    state: link
    dest: "{{ home_dir }}/.codex/prompts"
    src: "{{ dotfiles_dir }}/claude/commands"

- name: starship config is symlinked
  file:
    state: link
    dest: "{{ home_dir }}/.config/starship.toml"
    src: "{{ dotfiles_dir }}/config/starship/starship.toml"

- name: neovim config folder is symlinked
  file:
    state: link
    dest: "{{ home_dir }}/.config/nvim"
    src: "{{ dotfiles_dir }}/config/nvim"

- name: default npm packages
  file:
    path: "{{ home_dir }}/.default-npm-packages"
    src: "{{ dotfiles_dir }}/config/npm/default-packages"
    state: link

- name: ~/.claude directory is present
  file:
    path: "{{ home_dir }}/.claude"
    state: directory

- name: claude commands directory is symlinked
  file:
    state: link
    dest: "{{ home_dir }}/.claude/commands"
    src: "{{ dotfiles_dir }}/claude/commands"

- name: claude settings.json is symlinked
  file:
    state: link
    dest: "{{ home_dir }}/.claude/settings.json"
    src: "{{ dotfiles_dir }}/claude/settings.json"

- name: claude agents directory is symlinked
  file:
    state: link
    dest: "{{ home_dir }}/.claude/agents"
    src: "{{ dotfiles_dir }}/claude/agents"

- name: claude CLAUDE.md is symlinked
  file:
    state: link
    dest: "{{ home_dir }}/.claude/CLAUDE.md"
    src: "{{ dotfiles_dir }}/claude/CLAUDE-GLOBAL.md"

- name: k9s config folder is symlinked
  file:
    state: link
    dest: "{{ home_dir }}/.config/k9s"
    src: "{{ dotfiles_dir }}/config/k9s"
