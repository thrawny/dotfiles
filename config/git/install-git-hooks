#!/usr/bin/env bash
set -euo pipefail

# Set this repo to use the checked-in hooks under config/git/hooks

git rev-parse --is-inside-work-tree >/dev/null 2>&1 || {
  echo "Run from inside a git repository." >&2
  exit 1
}

repo_root=$(git rev-parse --show-toplevel)
cd "$repo_root"

if [ ! -d config/git/hooks ]; then
  echo "No hooks directory found at $repo_root/config/git/hooks" >&2
  exit 1
}

git config core.hooksPath config/git/hooks
chmod +x config/git/hooks/* || true
echo "Configured core.hooksPath to config/git/hooks for this repo." >&2
